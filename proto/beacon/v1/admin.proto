syntax = "proto3";

package beaconapi.v1.adminapi;

option go_package = "github.com/BeaconUC/beacon-api-schemas/gen/beaconapi/v1/adminapi;adminapi";

import "google/protobuf/timestamp.proto";
import "buf/validate/validate.proto";
import "beacon/v1/common/types.proto";

message UpdateOutageStatusRequest {
    beaconapi.v1.common.Uuid outage_id = 1;
    string new_status = 2 [
        (buf.validate.field).string.in = "verified,being_resolved,resolved"
    ];
    string notes = 3 [(buf.validate.field).string.max_len = 1000];
}

message UpdateOutageStatusResponse {
    string message = 1;
    google.protobuf.Timestamp updated_at = 2;
}

message AssignCrewRequest {
    beaconapi.v1.common.Uuid outage_id = 1;
    beaconapi.v1.common.Uuid crew_id = 2;
}

message AssignCrewResponse {
    string message = 1;
    google.protobuf.Timestamp assigned_at = 2;
}

service AdminService {
    rpc UpdateOutageStatus(UpdateOutageStatusRequest)
        returns (UpdateOutageStatusResponse);

    rpc AssignCrew(AssignCrewRequest)
        returns (AssignCrewResponse);
}